const BASE_URL="http://127.0.0.1:5500/",api=async t=>{return(await fetch(BASE_URL+t)).json()};
let player=null;const initYoutubeIframe=()=>{var e=document.createElement("script"),t=(e.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)};async function onYouTubeIframeAPIReady(){const e=(await api("src/music.json"))["Edu FALASCHI - Sacrifice"];var t=.5*screen.height,o=.95*screen.width;player=new YT.Player("player",{height:t,width:o,videoId:e.videoId,playerVars:{controls:0,disablekb:1},events:{onReady:()=>app(e.subtitles)}})}const pauseVideo=()=>player.pauseVideo(),playVideo=(e,t)=>{player.playVideo(),loadContent(e,t)},clickResponse=(e,t,o,i)=>{t.innerHTML="",playVideo(o,i)},query=(t,o,e)=>{let i;const n=document.querySelector("form");n.innerHTML="",e.forEach(e=>{(i=document.createElement("button")).onclick=()=>clickResponse(e,n,t,o),i.textContent=e,n.appendChild(i)}),isLast(t,o)||o++},loadContentQuery=(e,t,o,i)=>{t.innerHTML=e[o].question,setTimeout(()=>{pauseVideo(),query(e,o,e[o].options)},i)},loadContent=(e,t)=>{var o=document.querySelector("p");let i=e[t]["time"];isLast(e,t)||(i=e[t+1].time-e[t].time),null!=e[t].options?loadContentQuery(e,o,t,i):(o.innerHTML=e[t].complete,isLast(e,t)||(setTimeout(()=>loadContent(e,t),i),t++))},toMilliseconds=(e,t)=>void 0!==e?e*t:0,originalTimeToMilliseconds=e=>{e.map(e=>{let t=String(e.time);t=t.split(".");var o=toMilliseconds(t[0],6e4),i=toMilliseconds(t[1],1e3);return e.time=o+i,e})},app=e=>{var t=document.querySelector(".playButton");originalTimeToMilliseconds(e),t.onclick=()=>playVideo(e,0)};initYoutubeIframe();
const isLast=(s,t)=>s.length-1===t;